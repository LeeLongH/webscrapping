services:
  webscrapping:
    build:
      context: .
      dockerfile: Dockerfile
    restart: always
    volumes:
      - ./AIRFLOW/dags:/opt/airflow/dags
      - ./AIRFLOW/logs:/opt/airflow/logs
      - ./db-credentials.json:/opt/airflow/db-credentials.json
      - ./AIRFLOW/simple_auth_manager_passwords.json.generated:/opt/airflow/simple_auth_manager_passwords.json.generated

    ports:
      - "8080:8080"
    environment:
      # SMTP settings
      - AIRFLOW__SMTP__SMTP_HOST=smtp.gmail.com
      - AIRFLOW__SMTP__SMTP_STARTTLS=True
      - AIRFLOW__SMTP__SMTP_SSL=False
      - AIRFLOW__SMTP__SMTP_PORT=587
      - AIRFLOW__SMTP__SMTP_MAIL_FROM=your_email@gmail.com
      - AIRFLOW__SMTP__SMTP_USER=your_email@gmail.com
      - AIRFLOW__SMTP__SMTP_PASSWORD=your_app_password
    command: airflow standalone